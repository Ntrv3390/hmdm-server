<!-- Call Log Modal -->
<div class="modal-header">
    <button type="button" class="close" ng-click="closeModal()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
    <h3 class="modal-title">
        <span localized>plugin.calllog.modal.title</span> - {{device.deviceNumber}}
    </h3>
</div>

<div class="modal-body">
    <!-- Device Info -->
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong localized>plugin.calllog.device.info</strong>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-sm-6">
                    <strong localized>form.device.number.label</strong>: {{device.deviceNumber || 'N/A'}}
                </div>
                <div class="col-sm-6">
                    <strong localized>form.device.model.label</strong>: {{device.model || 'N/A'}}
                </div>
            </div>
            <div class="row" style="margin-top: 10px;">
                <div class="col-sm-6">
                    <strong localized>form.device.imei.label</strong>: {{device.imei || 'N/A'}}
                </div>
                <div class="col-sm-6">
                    <strong localized>form.device.phone.label</strong>: {{device.phone || 'N/A'}}
                </div>
            </div>
        </div>
    </div>

    <!-- Call Logs -->
    <div class="panel panel-default">
        <div class="panel-heading">
            <strong localized>plugin.calllog.logs.title</strong>
            <button 
                class="btn btn-xs btn-danger pull-right" 
                ng-click="deleteAllCallLogs()"
                ng-disabled="loading || callLogs.length === 0"
                localized>
                button.delete.all
            </button>
        </div>
        <div class="panel-body">
            <div ng-if="loading" class="text-center">
                <i class="fa fa-spinner fa-spin fa-2x"></i>
                <p localized>loading.data</p>
            </div>

            <div ng-if="!loading && callLogs.length === 0" class="text-center text-muted">
                <p localized>plugin.calllog.no.logs</p>
            </div>

            <div ng-if="!loading && callLogs.length > 0">
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th localized>plugin.calllog.table.date</th>
                            <th localized>plugin.calllog.table.type</th>
                            <th localized>plugin.calllog.table.number</th>
                            <th localized>plugin.calllog.table.contact</th>
                            <th localized>plugin.calllog.table.duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="log in callLogs">
                            <td>{{formatDate(log.callTimestamp)}}</td>
                            <td>
                                <span class="label" 
                                      ng-class="{
                                          'label-success': log.callType === 1 || log.callType === 2,
                                          'label-warning': log.callType === 3,
                                          'label-danger': log.callType === 4 || log.callType === 5
                                      }">
                                    {{getCallTypeName(log.callType)}}
                                </span>
                            </td>
                            <td>{{log.phoneNumber || 'N/A'}}</td>
                            <td>{{log.contactName || '-'}}</td>
                            <td>{{formatDuration(log.duration)}}</td>
                        </tr>
                    </tbody>
                </table>

                <!-- Pagination -->
                <div class="text-center" ng-if="pagination.total > pagination.pageSize">
                    <button 
                        class="btn btn-default btn-sm" 
                        ng-click="previousPage()" 
                        ng-disabled="pagination.page === 0">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span localized>button.previous</span>
                    </button>
                    <span style="margin: 0 15px;">
                        {{pagination.page + 1}} / {{Math.ceil(pagination.total / pagination.pageSize)}}
                    </span>
                    <button 
                        class="btn btn-default btn-sm" 
                        ng-click="nextPage()" 
                        ng-disabled="(pagination.page + 1) * pagination.pageSize >= pagination.total">
                        <span localized>button.next</span>
                        <span class="glyphicon glyphicon-chevron-right"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal-footer">
    <button type="button" class="btn btn-default" ng-click="closeModal()" localized>button.close</button>
</div>
